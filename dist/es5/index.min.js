!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t["js-flock"]={})}(this,function(t){"use strict";var e=Object.freeze({isStrangled:!0,message:"Promise have timed out"}),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t){return!(!t||"object"!==(void 0===t?"undefined":n(t))&&"function"!=typeof t||!Object.prototype.hasOwnProperty.call(t,"constructor")||"function"!=typeof t.constructor||!Function.prototype.toString.call(t.constructor).includes("[native code]"))},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function t(e,n,i){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(u.has(n))return n;if(Object[e](n),u.add(n),n===Function.prototype)return n;var f=Object.getOwnPropertyNames(n);if(Object.getOwnPropertySymbols&&(f=f.concat(Object.getOwnPropertySymbols(n))),f.forEach(function(r){var f=n[r];!f||"object"!==(void 0===f?"undefined":o(f))&&"function"!=typeof f||"undefined"==typeof ArrayBuffer||ArrayBuffer.isView(f)||t(e,f,i,u)}),i&&"object"===(void 0===i?"undefined":o(i))&&i.proto){var c=Object.getPrototypeOf(n);c&&!r(c)&&t(e,c,i,u)}return n},u=function(t){return function(e,n){var r=Object.prototype.toString.call(n);if("[object "+e+"]"!==r)throw new TypeError(t+": expected ["+e+"] but got "+r+"]")}},f=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t){var e=u("promisify"),n=Symbol("promisified"),o=function(t,e,n){var r=this;return new Promise(function(o,i){e.push(function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),u=1;u<e;u++)r[u-1]=arguments[u];return t?i(t):o(n&&n.multiArgs?r:r[0])}),t.apply(r,e)})},i=function(t,e,r){return"function"==typeof t&&!0!==t[n]&&(!r||r.some(function(e){return e===t.name}))&&(!e||e.every(function(e){return e!==t.name}))},f=function(t,n){return e("Function",t),function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return o.call(this,t,r,n)}};f.all=function(t,o){e("Object",t);var u=o||{},c=u.suffix,a=u.exclude,y=u.include,s=u.proto;if(c="string"==typeof c?c:"Async",a=Array.isArray(a)?a:void 0,y=Array.isArray(y)?y:void 0,Object.getOwnPropertyNames(t).forEach(function(e){if(i(t[e],a,y)){for(var r=""+e+c;r in t;){if(!0===t[r][n])return;r+="Promisified"}t[r]=f(t[e],o),t[r][n]=!0}}),s){var l=Object.getPrototypeOf(t);l&&!r(l)&&f.all(l,o)}return t},t.exports=f}),c=function t(e,n,r,o,i,u){var f=n(i),c=n(u);return f===c?r&&r.length>o?t(e,r[o],r,o+1,i,u):0:f<c?-e:null==f?1:null==c?-1:e},a=function(t){return t},y=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;if(!Array.isArray(e))return e;var r=Array.isArray(n)?c.bind(void 0,t,n.shift(),n,0):c.bind(void 0,t,n,void 0,0);return e.sort(r)},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(t){if(Array.isArray(t)){var e={};return t.forEach(function(t){e[t]=Symbol(t)}),e}return"object"===(void 0===t?"undefined":s(t))?Object.assign({},t):{}},p=function(t){return/^class /.test(Function.prototype.toString.call(t))},d=function(t,e){var n=t[e];"function"!=typeof n||p(n)||(t[e]=n.bind(t))},m=u("waitFor"),v={collar:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,r=new Promise(function(t,r){return setTimeout(r,n,e)});return Promise.race([r,t])},deepFreeze:function(t,e){return i("freeze",t,e)},deepPreventExtensions:function(t,e){return i("preventExtensions",t,e)},deepSeal:function(t,e){return i("seal",t,e)},last:function(t,e){var n=Array.isArray(t)?t.length:0;if(n){if("function"!=typeof e)return t[n-1];for(;--n;)if(e(t[n]))return t[n]}},promisify:f,singular:function(t){var e=!1,n=function(){return e=!1};return function(){if(!e){e=!0;for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];o.unshift(n),t.apply(this,o)}}},sort:function(t){return{asc:function(e){return y(1,t,e)},desc:function(e){return y(-1,t,e)}}},toEnum:function(t){var e=l(t),n=Object.keys(e).filter(function(t){return"function"!=typeof e[t]}),r=n.map(function(t){return e[t]});if(new Set(r).size!==r.length)throw new TypeError("toEnum: Duplicate values detected");Object.freeze(n),Object.freeze(r),Object.keys(e).forEach(function(t){return d(e,t)});var o={keySet:void 0,valueSet:void 0};return e.keys=function(){return n},e.values=function(){return r},e.haveKey=function(t){return o.keySet=o.keySet||new Set(n),o.keySet.has(t)},e.exists=function(t){return o.valueSet=o.valueSet||new Set(r),o.valueSet.has(t)},Object.freeze(e)},waitFor:function(t,e){m("Function",t);var n=Number(e&&e.interval)||50,r=Date.now()+(Number(e&&e.timeout)||5e3);return new Promise(function e(o,i){var u=t();return u?o(u):Date.now()>r?i(new Error("Timed out!")):setTimeout(e,n,o,i)})}},b=v.collar,S=v.deepFreeze,h=v.deepPreventExtensions,g=v.deepSeal,j=v.last,O=v.promisify,w=v.singular,A=v.sort,P=v.toEnum,x=v.waitFor;t.default=v,t.collar=b,t.deepFreeze=S,t.deepPreventExtensions=h,t.deepSeal=g,t.last=j,t.promisify=O,t.singular=w,t.sort=A,t.toEnum=P,t.waitFor=x,Object.defineProperty(t,"__esModule",{value:!0})});
